(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e;async function r(){try{Spicetify.showNotification("Fetching liked songs...",!1);var t=await(async()=>{console.log("Fetching liked songs...");let e="https://api.spotify.com/v1/me/tracks?limit=50";var t=[];try{for(;e;){var i=await Spicetify.CosmosAsync.get(e);if(!i)return Spicetify.showNotification("Failed to fetch liked songs: Empty response"),[];if(i.error)return Spicetify.showNotification("Failed to fetch liked songs: "+(i.error.message||"Unknown error")),console.error("API error:",i.error),[];if(!i.items||!Array.isArray(i.items)||0===i.items.length)break;var r=i.items.filter(e=>e&&e.track).map(e=>({name:e.track.name||"Unknown Track",artist:e.track.artists?e.track.artists.map(e=>e.name).join(", "):"Unknown Artist",uri:e.track.uri||""}));t.push(...r),e=i.next||null,Spicetify.showNotification(`Fetched ${t.length} tracks so far...`)}return t}catch(e){console.error("Error in fetchLikedList:",e);var o=e instanceof Error&&e.message?e.message:"Unknown error";return Spicetify.showNotification("Error fetching tracks: "+o),[]}})();t&&0!==t.length?(Spicetify.showNotification(`Found ${t.length} liked songs. Preparing download...`),await Spicetify.Platform.ClipboardAPI.copy(JSON.stringify(t,null,2)),Spicetify.showNotification(t.length+" Saved Tracks copied to clipboard!",!1,5e3)):Spicetify.showNotification("No liked songs found or error occurred.")}catch(e){console.error("Error in onGetSavedTracksClick:",e);t=e instanceof Error&&e.message?e.message:"Unknown error";Spicetify.showNotification("Error: "+t)}}e=async function e(){var t,i;Spicetify&&Spicetify.Topbar&&Spicetify.CosmosAsync&&Spicetify.Platform&&Spicetify.Platform.ClipboardAPI&&Spicetify.showNotification&&Spicetify.SVGIcons?((i=(t=new Spicetify.Topbar.Button("Extract Liked Songs",'<svg data-encore-id="icon" role="img" aria-hidden="true" class="e-9890-icon e-9890-baseline" viewBox="0 0 24 24"><path xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" d="M8 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1h2a2 2 0 0 1 2 2v15a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h2zm0 2H6v15h12V5h-2v1a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V5zm6-1h-4v1h4V4z" fill="#fff"/></svg>',async()=>{await r()})).element.firstElementChild)instanceof HTMLElement&&(i.style.padding="12px",i.style.transform="translateX(-1px)"),t.element.style.width="48px",t.element.style.height="48px",t.element.style.justifyContent="center",t.element.style.alignItems="center",t.element.style.background="rgba(59, 45, 45, 0.5)",t.element.style.borderRadius="12px",t.element.style.borderColor="rgba(159, 140, 140, 0.5)",t.element.style.borderWidth="1px",t.element.style.borderStyle="solid",t.element.style.marginLeft="12px",console.log("Liked Songs Extractor loaded successfully!")):setTimeout(e,1e3)},(async()=>{await e()})()})();