(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var e;async function t(){try{Spicetify.showNotification("Fetching liked songs...",!1);var t=await(async()=>{console.log("Fetching liked songs...");let e="https://api.spotify.com/v1/me/tracks?limit=50";var t=[];try{for(;e;){var o=await Spicetify.CosmosAsync.get(e);if(!o)return Spicetify.showNotification("Failed to fetch liked songs: Empty response"),[];if(o.error)return Spicetify.showNotification("Failed to fetch liked songs: "+(o.error.message||"Unknown error")),console.error("API error:",o.error),[];if(!o.items||!Array.isArray(o.items)||0===o.items.length)break;var i=o.items.filter(e=>e&&e.track).map(e=>({name:e.track.name||"Unknown Track",artist:e.track.artists?e.track.artists.map(e=>e.name).join(", "):"Unknown Artist",uri:e.track.uri||""}));t.push(...i),e=o.next||null,Spicetify.showNotification(`Fetched ${t.length} tracks so far...`)}return t}catch(e){console.error("Error in fetchLikedList:",e);var r=e instanceof Error&&e.message?e.message:"Unknown error";return Spicetify.showNotification("Error fetching tracks: "+r),[]}})();t&&0!==t.length?(Spicetify.showNotification(`Found ${t.length} liked songs. Preparing download...`),await Spicetify.Platform.ClipboardAPI.copy(JSON.stringify(t,null,2)),Spicetify.showNotification(t.length+" Saved Tracks copied to clipboard!",!1,5e3)):Spicetify.showNotification("No liked songs found or error occurred.")}catch(e){console.error("Error in onGetSavedTracksClick:",e);t=e instanceof Error&&e.message?e.message:"Unknown error";Spicetify.showNotification("Error: "+t)}}e=async function e(){if(Spicetify&&Spicetify.Topbar&&Spicetify.CosmosAsync&&Spicetify.Platform&&Spicetify.Platform.ClipboardAPI&&Spicetify.showNotification&&Spicetify.SVGIcons){let e=new Spicetify.Topbar.Button("Extract Liked Songs",Spicetify.SVGIcons.download,async()=>{Spicetify.showNotification("Hello world!")});e.disabled=!0,e.element.style.backgroundColor="#1db954",e.element.style.cursor="pointer",e.element.style.marginLeft="10px",e.element.style.marginRight="10px",e.element.style.display="flex",e.element.style.alignItems="center",e.element.style.justifyContent="center",e.element.style.width="50px",e.element.style.height="50px",e.element.addEventListener("click",async()=>{e.disabled=!0,e.element.style.color="gray",e.element.style.backgroundColor="lightgray",e.element.style.cursor="not-allowed",await t(),e.disabled=!1,e.element.style.color="red",e.element.style.backgroundColor="white",e.element.style.cursor="pointer"}),e.element.addEventListener("mouseover",()=>{e.element.style.backgroundColor="red",e.element.style.color="yellow"}),e.element.addEventListener("mouseout",()=>{e.element.style.backgroundColor="white",e.element.style.color="red"}),console.log("Liked Songs Extractor loaded successfully!")}else setTimeout(e,1e3)},(async()=>{await e()})()})();